<html>
  <head>
    <meta charset="UTF-8" />
    <title>출력결과</title>
  </head>
  <body>
    <script>
      //forEach,map,filter,reduce 이 네개의 메서드는 고차함수다.
      //고차함수란 자신의 매개변수에 인자로 함수를 받거나 반환(return)하는 값이 함수인 것을 의미한다.

      //forEach
      //forEach(callback, [thisArg])  []는 Optional로 선택사항이다.
      //callback(currentValue[, index[, array]])

      function forEach(callback, thisArg) {
        for (let i = 0; i < a.length; i++) {
          callback(a[i], i);
        }
      }

      //위의 함수는 이해를 돕기위해서 뇌피셜로 작성된 코드다. 실제 forEach가 어떻게 작동되는지는 모른다.

      //주어진 배열의 요소를 전부 돌면서 콜백함수에 첫번째 값으로 요소의값, 두번째 값으로 요소의 인덱스 값을 준다.
      //여기서는 안썼지만 세번째 값으로 주어진 배열을 넘긴다. 즉, callback(a[i], i, a)인 것이다.

      //두번째 요소인 thisArg는 this값이고 첫번째 요소인 콜백함수에 바인딩 된다. 그냥 this를 적으면 callback함수(객체)를 가르키며 함수 안의 this를 사용한다.
      //[1,2]와 같은 객체를 주면 그것이 callback의 this가 된다.
      //콜백 안에 this를 사용하지 않는다면 null, undefined를 주거나 그냥 사용하지 않으면 된다.

      //예시

      a = [10, 11, 12, 13, 14, 15];
      a.forEach(
        function (v, i, arr) {
          console.log(v, i, arr, this);
        },
        [1, 2]
      );

      //위와 같은 것이 함수형 프로그래밍이다. 자바스크립트는 함수형 프로그래밍이 가능하다.

      //map
      //원본 배열을 하나하나 탐색하면서 요소들을 이용하여 새로운 배열을 생성한다.
      //map(callback[,thisarg]) callback(currentValue[, index[, array]])

      //map 함수구조 뇌피셜

      function map(callback, thisArg) {
        let list = [];
        for (let i = 0; i < a.length; i++) {
          list.push(callback(a[i], i));
        }
        return list;
      }

      //예시1

      a = [10, 11, 12, 13, 14, 15];
      let answer = a.map(
        function (v, i) {
          return v * v;
        },
        [1, 2]
      );

      console.log(answer);

      //예시2
      a = [10, 11, 12, 13, 14, 15];
      let answer = a.map(
        function (v, i) {
          if (v % 2 === 0) return v;
        },
        [1, 2]
      );

      console.log(answer);

      //map메서드는 원본 배열의 길이와 똑같은 길이의 배열을 반환하기 때문에 조건에 안맞는 요소는 undefined로 나온다.
    </script>
  </body>
</html>
